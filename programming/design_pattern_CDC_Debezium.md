# Debezium

> Debezium 是一款基於 Apache Kafka 生態系統的開源分散式 CDC（Change Data Capture，變更資料擷取）平台，能即時捕捉並發布資料庫的行級變更事件，廣泛用於資料同步、實時分析與事件驅動架構。以下為 Debezium 的詳細說明：

## Debezium 特點

- **架構演進（Schema Evolution）**  
  能追蹤並發布資料庫結構變更，讓下游系統自動適應資料表的新增欄位或結構調整[1]。

- **容錯與可擴展性**  
  建構於 Kafka Connect 之上，繼承 Kafka 的分散式架構與高可用機制，支援水平擴展與故障自動恢復[1][5]。

- **多資料庫支援**  
  支援 MySQL、PostgreSQL、MongoDB、Oracle、SQL Server 等多種主流資料庫，且持續擴展中[1][5]。

- **即時數據同步**  
  利用資料庫的交易日誌（如 MySQL Binlog、Postgres WAL）捕捉變更，延遲低至毫秒級[1][5]。

- **事件流格式統一**  
  將資料變更轉為結構化事件（JSON、Avro），統一下游消費者的資料格式與模型[1][5]。

- **支援 Outbox 模式**  
  方便微服務架構中資料庫與事件的同步，確保資料一致性[1]。

- **完善監控機制**  
  內建 JMX 指標，可監控連接器健康狀態與效能，方便運維[1][5]。

- **多種部署模式**  
  支援 Kafka Connect 連接器部署、Debezium Server 以及內嵌引擎，靈活適應不同架構需求[5]。

---

## Debezium 用途

- **即時資料同步**  
  將資料庫變更實時同步至資料倉庫、搜尋引擎（Elasticsearch）、快取系統等，避免直接查詢主庫負載[1]。

- **事件驅動架構**  
  透過變更事件觸發後續業務流程或微服務，實現鬆耦合的事件流設計[1][5]。

- **審計與合規**  
  捕捉完整變更歷史，生成審計日誌，便於監管合規與故障排查[1]。

- **快取失效**  
  將變更事件推送至分散式快取系統（如 Redis），確保快取資料即時更新[1]。

- **資料湖與流批一體化**  
  將資料流式寫入資料湖（如 S3、HDFS），支持流批一體化分析[2]。

---

## Debezium 優缺點

| 項目             | 優點                                                        | 缺點                                                       |
| ---------------- | ----------------------------------------------------------- | ---------------------------------------------------------- |
| **延遲與效能**   | 基於交易日誌捕捉，延遲低（毫秒級），對原資料庫性能影響小。  | 需要維護 Kafka 與 Kafka Connect 集群，系統架構較複雜。     |
| **資料完整性**   | 支援事務一致性，確保事件完整且有序，避免資料遺漏。          | 依賴資料庫日誌，若日誌被清理或損壞，可能導致資料同步中斷。 |
| **架構彈性**     | 支援多種資料庫與多種部署模式，能靈活整合多種下游系統。      | 不同資料庫日誌格式差異大，連接器配置與調優有一定門檻。     |
| **生態系統整合** | 與 Kafka 生態系統深度整合，方便構建流處理與多系統同步管道。 | Kafka 生態系統學習曲線陡峭，且運維成本較高。               |
| **監控與維護**   | 內建監控指標，支持消息轉換與過濾，便於運維與資料治理。      | 需要專業運維團隊監控 Kafka Connect 與連接器狀態。          |

---

## Debezium 使用情境

| 情境描述                     | 適用說明                                                                   |
| ---------------------------- | -------------------------------------------------------------------------- |
| **跨系統即時資料同步**       | 將 MySQL 變更同步到 Elasticsearch、Redis、資料倉庫等，實現快速查詢與分析。 |
| **事件驅動微服務架構**       | 監控資料庫變更事件，觸發微服務流程，實現鬆耦合事件流設計。                 |
| **審計與合規需求**           | 捕捉完整資料變更歷史，生成審計日誌，便於監管與追蹤。                       |
| **資料湖寫入與流批一體分析** | 將變更事件寫入 S3、HDFS 等資料湖，支持後續批次與流式分析。                 |
| **快取同步與失效**           | 將資料庫變更事件推送至快取系統，保持快取資料一致性。                       |
| **無法修改資料庫結構的場景** | CDC 非侵入式捕捉變更，不需改動資料庫表結構，適合傳統系統改造。             |

---

## 總結

Debezium 是一款成熟且功能豐富的 CDC 平台，適合需要即時捕捉資料庫變更並推送至 Kafka 生態系統的場景。它具備低延遲、高可靠、架構彈性及多資料庫支援等優勢，但同時帶來較高的系統複雜度與運維成本。選擇 Debezium 時，需評估團隊 Kafka 運維能力與系統需求，合理規劃部署與監控策略，才能發揮最大效益。

---

**參考來源:**

[1] https://victorleungtw.com/zh/2024/12/12/debezium/ \
[2] https://aws.amazon.com/cn/blogs/china/debezium-deep-dive/ \
[3] https://www.cnblogs.com/leeolevis/p/18046528/how-to-use-debezium \
[4] https://xixuebin.github.io/2019-05-30-141229-ch.html \
[5] https://blog.csdn.net/fengfengzai0101/article/details/122512492 \
[6] https://juejin.cn/post/7179809652945715259 \
[7] https://blog.csdn.net/weixin_43564627/article/details/118959419 \
[8] https://nightlies.apache.org/flink/flink-docs-release-1.13/zh/docs/connectors/table/formats/debezium/

---

[返回目錄](./../README.md)
