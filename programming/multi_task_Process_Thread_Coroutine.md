# 執行體 Execution Entity

> 執行體（Execution Entity）是程式中可被執行的基本單位，負責承擔程式的運行任務。現代作業系統與程式設計中，進程（Process）、執行緒（Thread）與協程（Coroutine）是三種主要的執行體類型，各自代表不同層級的執行單元，並在資源分配與調度方式上有所區別。以下將針對這三者的定義與特性進行說明與比較。

## 定義說明

- **進程（Process）**  
  是已被作業系統載入記憶體並執行的程式，是資源分配的最小單位。每個進程擁有獨立的記憶體空間和系統資源，進程間相互獨立，通信需透過特定機制。進程建立與切換開銷較大，但相對穩定安全[1][2][3][5]。

- **執行緒（Thread）**  
  是進程中的一個執行單位，是 CPU 調度和運算的最小單位。多個執行緒共享同一進程的資源（如記憶體空間），但擁有自己的程式計數器、堆疊等。執行緒間切換開銷小於進程，但需注意同步與死結問題[1][2][3][5]。

- **協程（Coroutine）**  
  是用戶態的輕量級執行緒，存在於執行緒內，由用戶程式自行控制調度（非搶占式）。協程擁有自己的上下文（寄存器、堆疊等），切換時不經過核心態，開銷極小且切換速度快。協程可保留上次狀態，適合非同步編程[1][2][3][4][7]。

## 比較表格

| 項目       | 進程(Process)                      | 執行緒(Thread)                   | 協程(Coroutine)                        |
| ---------- | ---------------------------------- | -------------------------------- | -------------------------------------- |
| 所屬層級   | 作業系統管理的資源分配單位         | 進程內的執行單位                 | 執行緒內的輕量級單位                   |
| 記憶體空間 | 獨立記憶體空間                     | 與同一進程的其他執行緒共享記憶體 | 與同一執行緒共享記憶體                 |
| 資源開銷   | 大（MB 級）                        | 中等（MB 級，較進程少）          | 小（KB 級）                            |
| 切換開銷   | 高（涉及上下文切換、記憶體切換等） | 較低（上下文切換較快）           | 非常低（用戶態切換，不經核心態）       |
| 調度方式   | 作業系統核心搶占式調度             | 作業系統核心搶占式調度           | 用戶態非搶占式調度，由程式控制         |
| 通信方式   | 需特殊機制（IPC）                  | 共享記憶體，需同步機制           | 共享記憶體，且切換可避免阻塞           |
| 穩定性     | 高，彼此獨立                       | 中，需注意同步與死結問題         | 低，依賴程式設計與調度策略             |
| 使用場景   | 重資源隔離、獨立運行環境           | 多任務並行、資源共享             | 高效非同步任務、輕量級並發             |
| 例子       | 瀏覽器、作業系統中的應用程式       | 多線程應用程式                   | Go 語言的 goroutine、Python 的 asyncio |

## 總結

- 進程是資源分配的基本單位，獨立且安全但開銷大。
- 執行緒是 CPU 調度的基本單位，能共享資源但需同步管理。
- 協程是用戶態輕量級執行單位，調度由程式控制，開銷小且切換快，適合高效非同步編程[1][2][3][5][7]。

---

**參考來源:**

[1] https://ithelp.ithome.com.tw/articles/10242047 \
[2] https://blog.kennycoder.io/2020/05/16/%E9%80%B2%E7%A8%8B-Process-%E3%80%81%E7%B7%9A%E7%A8%8B-Thread-%E3%80%81%E5%8D%94%E7%A8%8B-Coroutine-%E7%9A%84%E6%A6%82%E5%BF%B5%E8%AC%9B%E8%A7%A3/ \
[3] https://blog.csdn.net/weixin_44816664/article/details/131569562 \
[4] https://ayamir.github.io/posts/knowledge/os/process-thread-coroutine/ \
[5] https://cloud.tencent.com/developer/article/1839604 \
[6] https://tans.fun/archives/coroutine \
[7] https://www.cnblogs.com/bandaoyu/p/16752433.html \
[8] https://www.zhihu.com/question/641739732

---

[返回目錄](./../README.md)
